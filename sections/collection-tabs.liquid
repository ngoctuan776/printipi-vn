{%- capture tabs -%}
{%- liquid 
   assign section_st = section.settings
   assign page_width = settings.cntwd | append: 'px'
   if section_st.sw
        assign page_width = '100vw'
   endif
-%}
{%- capture sizes -%}(min-width:1024px) calc(({{ page_width }} - {{ settings.grid_space | times: section_st.grid | minus:settings.grid_space }}px) / {{ section_st.grid }}),(min-width:768px) calc((100vw - {{ settings.grid_space | times: section_st.gridtb | minus:settings.grid_space }}px) / {{ section_st.gridtb }}), calc((100vw - {{ settings.grid_spacem | times: section_st.gridmb | minus:settings.grid_spacem }}px) / {{ section_st.gridmb }}){%- endcapture -%}
{% capture tabs_style %}
  --tbfs:{{ section_st.tfs }}px;--tbfsm:{{ section_st.tfsm }}px;--tbfw:{{ section_st.tfw }};--tbcl:{{ section_st.cl }};--tbcla:{{ section_st.cla }};--tbbg:{{ section_st.tbg }};--tbbga:{{ section_st.tbga }};--tbbd:{{ section_st.bdr }};--tbbda:{{ section_st.bdra }};
  {%- if section_st.tab_style == '1' -%}--tbbdr:{{ section_st.bdrr }}px;{%- else -%}--tbbdr:0;{%- endif -%}
{% endcapture %}
<div class="sec_cov{% if section_st.hidem %} hide-sm{% endif %}{% if section_st.hided %} hide-md hide-lg{% endif %}{% if section_st.bgimg != blank %} bgImg lazyload zi1{% endif %}" style="--sbg:{% if section_st.bgg != blank %}{{ section_st.bgg }}{% else %}{{ section_st.bg }}{% endif %};--sst:{{ section_st.sst }}px;--ssb:{{ section_st.ssb }}px;--sstm:{{ section_st.sstm }}px;--ssbm:{{ section_st.ssbm }}px;--overlay:{{ section_st.overlay | color_modify: 'alpha', section_st.overlay_op }};"
    {% if section_st.bgimg != blank %}data-bgset="{{ section_st.bgimg | image_url: width: section_st.bgimg.width | image_tag: widths: '400,600,800,1000,1400,1600,2000,2400,3000' | split: 'srcset="' | last | split: '"' | first }}" data-sizes="auto" data-parent-fit="contain"{% endif %}>  
  <tabs-section class="db tabSection cltabWrap {% if section_st.sw %}fw-sec{% else %}page-width{% endif %}" id="{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="carousel" style="{{ tabs_style }}">     
      {% render 'sec-title' %}
      <div class="fl f-wrap mb30 clTabs tbstl{{ section_st.tab_style }} gap{% if settings.title_align == "tl" %} f-jcs{% else %} f-jcc{% endif %}{% if section_st.acc %} hide-sm{% endif %}" style="{% if section_st.tab_style == '1' %}--gap:10px;{% else %}--gap:40px;--gapm:20px{% endif %}">
        {%- for block in section.blocks limit: section.blocks.size -%}
            {%- if block.settings.title != blank -%}
                <button type="button" class="tabBtn {{ section_st.tff }} anim{% if forloop.first %} active{% endif %} {% render 'animate-data', css:true %}" {% render 'animate-data' %} data-id="cl{{ block.id }}" {{ block.shopify_attributes }}>{{ block.settings.title }}</button>
            {%- endif -%}
        {%- endfor -%}
      </div>

      {% for block in section.blocks limit: section.blocks.size %}
        {% assign blk_st = block.settings %}
         {%- assign collection = collections[block.settings.collection] -%}
         {%- capture products_data -%}
           {% if block.settings.collection != blank %}
                {% for product in collection.products limit: section_st.rows %}
                  <div class="swiper-slide gitem {% render 'animate-data', css:true %}" {% render 'animate-data' %} {{ block.shopify_attributes }}>{% render 'product-card-grid', product: product, block: block.settings, section_st:section_st, sizes: sizes %}</div>
                {% endfor %}
            {% else %}
                {% for i in (1..section_st.rows) %}
                    <div class="swiper-slide gitem {% render 'animate-data', css:true %}" {% render 'animate-data' %}>
                        <div class="grid_bx">
                            <a href="#" class="grid_lnk">
                                <div class="grid_img_wr">{% capture current %}{% cycle 1, 2, 3, 4 %}{% endcapture %}{{ 'product-apparel-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}</div><br/>
                                <div class="h4 grid_title">{{ 'homepage.onboarding.product_title' | t }}</div>
                                <div class="grid_meta"> {% render 'product-price' %} </div>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
         {%- endcapture -%}
         {% capture more_button %}
           {% if block.settings.btntxt != blank %}<p class="tc w_100 mt10 mb0 {% render 'animate-data', css:true %}"><a href="{{ block.settings.collection.url }}" title="{{ block.settings.btntxt }}" class="btn btn-md dib">{{ block.settings.btntxt }}</a></p>{% endif %}
         {% endcapture %}

            {%- if section_st.acc and block.settings.title != blank -%}
              <h2 class="accordion_tab js-toggle fl f-aic hide-md hide-lg mb10">{{ blk_st.title }} <svg class="at-icon ml_auto updown"><use xlink:href="#icon-arrow"></use></svg></h2>
            {%- endif -%}
          {%- if section_st.carousel -%}
            <slide-section id="cl{{ block.id }}" class="tab_panel grid grid-products rwcols-{{ section_st.gridmb }} rwcols-md-{{ section_st.gridtb }} rwcols-lg-{{ section_st.grid }} swiper{% if forloop.first %} active{% endif %}"
              data-swiper='{ "slidesPerView":"auto", "loop":{{ section_st.loop }}, {% if section_st.autoplay %}"autoplay":{ "delay":"{{ section_st.speed | times: 1000 }}" },{% endif %} "navigation":{ "nextEl":".swn{{ section.id }}","prevEl":".swp{{ section.id }}" },"pagination":{ "el":".swpg{{ section.id }}","clickable":true }}'>
                <div class="swiper-wrapper">{{ products_data }}</div>
                {% render 'swiper-navigation', id:section.id, section_st:section_st %}
                {{ more_button }}
            </slide-section>
        {%- else -%}
            <div id="cl{{ block.id }}" class="tab_panel grid grid-products rwcols-{{ section_st.gridmb }} rwcols-md-{{ section_st.gridtb }} rwcols-lg-{{ section_st.grid }}{% if forloop.first %} active{% endif %}">
                {{- products_data -}}
                {{ more_button }}
            </div>
        {%- endif -%}

      {% endfor %}
  </tabs-section>
</div>
{%- endcapture -%}
{{ tabs | strip_newlines | remove: "  " | remove: "	" }}
{% schema %}
  {
    "name": "Products Tabs",
    "class": "index-section",
    "disabled_on": {
      "groups": ["header", "footer", "custom.overlay"]
    },
    "max_blocks": 8,
    "settings": [	  
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Our Collections"		
      },	  
 	 {
        "type": "textarea",
        "id": "subtitle",
        "label": "Sub Heading",
         "default":"Indulge in the luxury of choice at your fingertips"
      },       
     {
        "type": "header",
        "content": "Grid Appearance ==="
      },
	   {
            "type": "select",
            "id": "prbox_style",
            "label": "Grid style",
            "default": "grid_1",
            "options": [
                    {
                      "value": "grid_1",
                      "label": "Icons - Bottom Center"
                    },
                    {
                      "value": "grid_2",
                      "label": "Info. Hover Image"
                    },
                    {
                      "value": "grid_3",
                      "label": "Icons - Bottom Left"
                    },         
                    {
                      "value": "grid_4",
                      "label": "Icons - Top Right"
                    }                   
                ]            
        },
		{
			"type": "checkbox",
			"id": "show_color_swatch",
			"label": "Show color swatch?",
			"default": true
        },
       
        {
            "type": "checkbox",
            "id": "show_vendor",
            "label": "Show vendor Name?",
            "default": false
        },                              
      {
        "type": "paragraph",
        "content": "Products per row ==="
      },
      {
        "type": "range",
        "id": "grid",
        "label": "Desktop",
        "default": 4,
        "min": 2,
        "max": 6,
        "step": 1
      },
      {
        "type": "range",
        "id": "gridtb",
        "label": "Tablet",
        "default": 3,
        "min": 1,
        "max": 5,
        "step": 1
      },
      {
        "type": "range",
        "id": "gridmb",
        "label": "Mobile",
        "default": 2,
        "min": 1,
        "max": 3,
        "step": 1
      },
      {
            "type": "range",
            "id": "rows",
            "label": "Products limit",
            "default": 5,
            "min": 2,
            "max": 50,
            "step": 1
        },
	   {
		"type":"paragraph",
		"content":"Find more options at Theme settings -> Products grid"
	   },
      {
        "type": "header",
        "content": "Tabs Design ==="
      },
      {
        "type": "select",
        "id": "tab_style",
        "label": "Tab Design",
		    "default": "1",      
        "options": [
          {
            "value": "1",
            "label": "Background and Border"
          },
          {
            "value": "2",
            "label": "Bottom Border"
          }		 
        ]
      },
      {
          "type":"checkbox",
          "id":"acc",
          "label":"Enable Accordion for Mobile?",
          "default": true
      },
      {
        "type": "select",
        "id": "tab_align",
        "label": "Tab Align",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          }
        ],
        "default": "left"
      },
      {
        "type": "range",
        "id": "tfs",
        "label": "Font Size",
        "default": 13,
        "min": 10,
        "max": 40,
        "step": 1,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "tfsm",
        "label": "Font Size (Mobile)",
        "default": 16,
        "min": 10,
        "max": 40,
        "step": 1,
        "unit": "px"
      },
      {
        "type": "select",
        "id": "tff",
        "label": "Font Family",
        "default": "ft1",
        "options": [
          {
            "value": "ft1",
            "label": "Font 1"
          },
          {
            "value": "ft2",
            "label": "Font 2"
          },
          {
            "value": "ft3",
            "label": "Font 3"
          }
        ]
      },
      {
        "type": "select",
        "id": "tfw",
        "label": "Font Weight",
        "default": "600",
        "options": [
          {
            "value": "300",
            "label": "Light"
          },
          {
            "value": "400",
            "label": "Regular"
          },
          {
            "value": "500",
            "label": "Medium"
          },
          {
            "value": "600",
            "label": "Semi Bold"
          },
          {
            "value": "700",
            "label": "Bold"
          }
        ]
      },
      {
        "type": "color",
        "id": "cl",
        "label": "Button Text",
        "default": "#000"
      },
      {
        "type": "color",
        "id": "cla",
        "label": "Button Text (active)",
        "default": "#eee"
      },     
	  {
        "type": "color",
        "id": "tbg",
        "label": "Button Background",
        "default": "#eee",
        "visible_if": "{{ section.settings.tab_style == '1' }}"
      },       
      {
        "type": "color",
        "id": "tbga",
        "label": "Button Background (active)",
        "default": "#000",
        "visible_if": "{{ section.settings.tab_style == '1' }}"
      },      
      {
        "type": "color",
        "id": "bdr",
        "label": "Button Border",
        "default": "#fff"
      },
      {
        "type": "color",
        "id": "bdra",
        "label": "Button Border (active)",
        "default": "#eee"
      },
      {
        "type": "range",
        "id": "bdrr",
        "label": "Button Rounded",
        "default": 0,
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "px",
        "visible_if": "{{ section.settings.tab_style == '1' }}"
      },       
		{
            "type": "header",
            "content": "Slider Settings ==="
        },
        {
            "type":"checkbox",
            "id":"carousel",
            "label":"Enable carousel",
            "default": true
        },
 		{
            "type": "checkbox",
            "id": "loop",
            "label": "Infinite loop",
            "default": true,
           "visible_if": "{{ section.settings.carousel }}"
        },
 		{
            "type": "checkbox",
            "id": "autoplay",
            "label": "Auto-rotate slide",
            "default": false,
            "visible_if": "{{ section.settings.carousel }}"
        },
        {
            "type": "range",
            "id": "speed",
            "label": "Change slide every",
            "default": 5,
            "min": 1,
            "max": 30,
            "step": 1,
            "unit": "Sec",
            "visible_if": "{{ section.settings.carousel }}"
        },		
		    {
            "type": "checkbox",
            "id": "arrow",
            "label": "Show arrows on desktop?",
            "default": true,
            "visible_if": "{{ section.settings.carousel }}"
        },
		    {
            "type": "checkbox",
            "id": "arrowm",
            "label": "Show arrows on mobile?",
            "default": false,
            "visible_if": "{{ section.settings.carousel }}"
        },		
		    {
            "type": "checkbox",
            "id": "dot",
            "label": "Show dots on desktop?",
            "default": false,
            "visible_if": "{{ section.settings.carousel }}"
        },
		    {
            "type": "checkbox",
            "id": "dotm",
            "label": "Show dots on mobile?",
            "default": true,
            "visible_if": "{{ section.settings.carousel }}"
        },
		    {
            "type": "header",
            "content": "Section Design ==="
        },
        {
            "type":"checkbox",
            "id":"sw",
            "label":"Fullwidth?",
            "default": false           
        },	
        {
            "type":"checkbox",
            "id":"npd",
            "label":"No padding?",
            "default": false,
            "info":"Remove left/right padding for fullwidth",
             "visible_if": "{{ section.settings.sw }}"
        },
        {
            "type": "color",
            "id": "bg",
            "label": "Background",
            "default":"#fff"	
        },
        {
            "type": "color_background",
            "id": "bgg",
            "label": "Gradient background"
        },	
        {
            "type": "image_picker",
            "id": "bgimg",
            "label": "Background image"
        }, 
        {
            "type": "color",
            "id": "overlay",
            "label": "Image overlay",
            "default": "#000",
            "visible_if": "{{ section.settings.bgimg != blank }}"
        },
        {
            "type": "range",
            "id": "overlay_op",
            "min": 0,
            "max": 1,
            "step": 0.1,
            "label": "Overlay opacity",
            "unit": "%",
            "default": 0,
            "visible_if": "{{ section.settings.bgimg != blank }}"
        },
       {
            "type": "color",
            "id": "headings_cl",
            "label": "Text"
        },
		  {
			"type": "range",
			"id": "sst",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing top",
			"unit": "px",
			"default":40
        },
		{
			"type": "range",
			"id": "ssb",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing bottom",
			"unit": "px",
			"default":40
        },		
		{
			"type": "range",
			"id": "sstm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing top (mobile)",
			"unit": "px",
			"default":15
        },
		{
			"type": "range",
			"id": "ssbm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Spacing bottom (mobile)",
			"unit": "px",
			"default":15
        },
         {
            "type": "checkbox",
            "id": "hidem",
            "label": "Hide on mobile?",
            "default": false
        },
        {
            "type": "checkbox",
            "id": "hided",
            "label": "Hide on desktop?",
            "default": false
        }	 
	 ],
	"blocks": [
      {
        "type": "tab",
        "name": "Collection",
        "settings": [
 		{
          "type": "text",
          "id": "title",
          "label": "Tab Name",
          "default": "Tab Name"
        },
       	 {
          "id": "collection",
          "type": "collection",
          "label": "Select collection"
    	  },
		 {
          "id": "btntxt",
          "type": "text",
          "label": "View all button text",
		  "info":"Keep empty to hide button",
		  "default":"VIEW ALL"
    	  }   
      	]
     }
	],
    "presets": [
      {
        "name": "Products Tabs",    
        "category": "Products",
        "blocks": [
          {
            "type": "tab"
          },
          {
            "type": "tab"
          },
          {
            "type": "tab"
          }
        ]
      }
    ]
  }
{% endschema %} 